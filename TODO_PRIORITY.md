# ูุงุฆูุฉ ุงูููุงู ุญุณุจ ุงูุฃููููุฉ โ

<div dir="rtl">

**ุขุฎุฑ ุชุญุฏูุซ**: 6 ููููุจุฑ 2025

---

## ๐ด ุงููุณุชูู 1: ุนุงุฌู ูุญุฑุฌ (ูุฌุจ ูุนูู ุงูููู/ุบุฏุงู)

### 1. โ ุฅุตูุงุญ Security Rules ููู Orders
**ุงููุฏุฉ**: 30 ุฏูููุฉ  
**ุงูุฃูููุฉ**: ๐ด๐ด๐ด ุญุฑุฌ ุฌุฏุงู

```javascript
// ูู firestore.rules
// ุงุณุชุจุฏู:
allow update: if isActiveUser();

// ุจู:
allow update: if isActiveUser() && (
  isCEO() ||
  isHead() ||
  // ... ุฑุงุฌุน LOGIC_ISSUES_AND_RECOMMENDATIONS.md โ ุงููุณู 6
);
```

**ุงูููู**: `firestore.rules`  
**ุงูุณุทูุฑ**: 119  
**ุงููุฑุฌุน**: `LOGIC_ISSUES_AND_RECOMMENDATIONS.md` โ ุงููุณู 6

---

### 2. โ ุชุฃููู Counters Collection
**ุงููุฏุฉ**: 15 ุฏูููุฉ  
**ุงูุฃูููุฉ**: ๐ด๐ด ุญุฑุฌ

```javascript
// ูู firestore.rules
match /counters/{counterId} {
  allow read: if isSignedIn();
  allow write: if false;  // โ ุบูุฑ ูุฐุง
}
```

**ุงููููุงุช**:
- `firestore.rules` (ุงูุณุทุฑ 223)
- ุฅูุดุงุก: `functions/src/triggers/counterTriggers.ts` (ุฅุฐุง ูู ููู ููุฌูุฏ)

---

### 3. โ ูุดุฑ Security Rules ุงููุญุฏุซุฉ
**ุงููุฏุฉ**: 5 ุฏูุงุฆู  
**ุงูุฃูููุฉ**: ๐ด๐ด ุญุฑุฌ

```bash
firebase deploy --only firestore:rules
```

---

## ๐ก ุงููุณุชูู 2: ููู ุฌุฏุงู (ูุฐุง ุงูุฃุณุจูุน)

### 4. โ ุฅุถุงูุฉ materialsStatus ููุทูุจุงุช
**ุงููุฏุฉ**: 1-2 ุณุงุนุฉ  
**ุงูุฃูููุฉ**: ๐ก๐ก ููู

**ุงูุฎุทูุงุช**:

1. **ุชุญุฏูุซ Types**
```typescript
// packages/shared/src/types/order.types.ts

export interface MaterialStatus {
  type: MaterialType;
  status: 'pending' | 'in_progress' | 'ready';
  assignedTo?: string;
  completedAt?: string;
  notes?: string;
}

export interface Order {
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  materialsStatus?: MaterialStatus[];  // โ ุฃุถู ูุฐุง
}
```

2. **ุชุญุฏูุซ ูุงุฌูุฉ ุชูู ุงูุฅุฑุณุงู**
```typescript
// apps/web/src/app/dispatch/page.tsx (ุฃูุดุฆ ุงูููู)
// ุฃู
// apps/web/src/app/orders/[id]/page.tsx (ุฃุถู ูุณู ููุฅุฑุณุงู)
```

**ุงููุฑุฌุน**: `LOGIC_ISSUES_AND_RECOMMENDATIONS.md` โ ุงููุณู 2

---

### 5. โ ุฅุถุงูุฉ ุญุฏ ุฃูุตู ูููุฑู ูู ุงูุชุณุนูุฑุฉ
**ุงููุฏุฉ**: 2-3 ุณุงุนุงุช  
**ุงูุฃูููุฉ**: ๐ก๐ก ููู

**ุงูุฎุทูุงุช**:

1. **ุฅุถุงูุฉ ุญููู ุฌุฏูุฏุฉ ููุทูุจ**
```typescript
// packages/shared/src/types/order.types.ts

interface Order {
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  accountingReviewedCost?: number;     // โ ุฌุฏูุฏ
  costVariancePercentage?: number;     // โ ุฌุฏูุฏ
}
```

2. **ุฅุถุงูุฉ ุฏุงูุฉ ูุญุต ุงููุฑู**
```typescript
// packages/shared/src/utils/orderUtils.ts (ุฃูุดุฆ ุงูููู)

const MAX_VARIANCE_PERCENTAGE = 10; // 10%

export function checkCostVariance(
  estimated: number, 
  final: number
): { isValid: boolean; variance: number } {
  const variance = ((final - estimated) / estimated) * 100;
  return {
    isValid: variance <= MAX_VARIANCE_PERCENTAGE,
    variance
  };
}
```

3. **ุชุทุจูู ูู ูุงุฌูุฉ ุงูุญุณุงุจุงุช**
```typescript
// apps/web/src/app/orders/[id]/page.tsx
// ูู ูุณู ุงูุญุณุงุจุงุชุ ุฃุถู ูุญุต ุนูุฏ ุชุญุฏูุซ ุงูุชุณุนูุฑุฉ ุงูููุงุฆูุฉ
```

**ุงููุฑุฌุน**: `LOGIC_ISSUES_AND_RECOMMENDATIONS.md` โ ุงููุณู 1

---

### 6. โ ูุงุฌูุฉ ุชุนููู ุงูููุงู ููุฑุคุณุงุก
**ุงููุฏุฉ**: 2-3 ุณุงุนุงุช  
**ุงูุฃูููุฉ**: ๐ก ููู

**ุงูุฎุทูุงุช**:

1. **ุฅุถุงูุฉ ูุงุฆูุฉ ููุณุฏูุฉ ูู ุชูุงุตูู ุงูุทูุจ**
```typescript
// apps/web/src/app/orders/[id]/page.tsx

{user.role === 'design_head' && 
 order.status === OrderStatus.PENDING_DESIGN && (
  <div className="mt-4">
    <label>ุชุนููู ุงููุตูู:</label>
    <select onChange={(e) => assignToDesigner(order.id, e.target.value)}>
      <option value="">ุงุฎุชุฑ ูุตูู...</option>
      {designers.map(d => (
        <option key={d.uid} value={d.uid}>{d.displayName}</option>
      ))}
    </select>
  </div>
)}
```

2. **ุฅูุดุงุก Cloud Function**
```typescript
// functions/src/triggers/assignmentTriggers.ts (ุฃูุดุฆ ุงูููู)

export const assignOrderToUser = functions.https.onCall(async (data, context) => {
  // ... ุฑุงุฌุน ุงููุฑุฌุน
});
```

**ุงููุฑุฌุน**: `LOGIC_ISSUES_AND_RECOMMENDATIONS.md` โ ุงููุณู 3

---

## ๐ ุงููุณุชูู 3: ููู (ุงูุฃุณุจูุนูู ุงููุงุฏููู)

### 7. ๐ง ูุธุงู ุงูููุงุชูุฑ - ุตูุญุฉ ุงููุงุฆูุฉ
**ุงููุฏุฉ**: 1 ููู  
**ุงูุฃูููุฉ**: ๐ด๐ด ุญุฑุฌ

**ุงูููู**: ุฅูุดุงุก `apps/web/src/app/accounting/invoices/page.tsx`

**ุงูููููุงุช ุงููุทููุจุฉ**:
- ุฌุฏูู ุงูููุงุชูุฑ
- ุชุตููุฉ (ุงูุญุงูุฉุ ุงููุชุฑุฉ ุงูุฒูููุฉ)
- ุจุญุซ (ุฑูู ุงููุงุชูุฑุฉุ ุงุณู ุงูุนููู)
- ุฒุฑ "ุฅูุดุงุก ูุงุชูุฑุฉ ุฌุฏูุฏุฉ"

**ุงููุฑุฌุน**: `DEVELOPMENT_ROADMAP.md` โ ุงููุฑุญูุฉ 1 โ ุงูุฃุณุจูุน 1

---

### 8. ๐ง ูุธุงู ุงูููุงุชูุฑ - ุตูุญุฉ ุงูุฅูุดุงุก
**ุงููุฏุฉ**: 1-2 ููู  
**ุงูุฃูููุฉ**: ๐ด๐ด ุญุฑุฌ

**ุงูููู**: ุฅูุดุงุก `apps/web/src/app/accounting/invoices/new/page.tsx`

**ุงูููููุงุช ุงููุทููุจุฉ**:
- ูููุฐุฌ ูุนูููุงุช ุงูุนููู (ูุน Auto-complete)
- ุฌุฏูู ุงูุจููุฏ (Add/Remove Items)
- ุญุณุงุจ ุชููุงุฆู (ุงููุฌููุน + ุงูุถุฑูุจุฉ)
- ุฑุจุท ุจุทูุจ (ุงุฎุชูุงุฑู)
- ูุนุงููุฉ ุงููุงุชูุฑุฉ

---

### 9. ๐ง ูุธุงู ุงูููุงุชูุฑ - ุตูุญุฉ ุงูุชูุงุตูู
**ุงููุฏุฉ**: 1 ููู  
**ุงูุฃูููุฉ**: ๐ด๐ด ุญุฑุฌ

**ุงูููู**: ุฅูุดุงุก `apps/web/src/app/accounting/invoices/[id]/page.tsx`

**ุงูููููุงุช ุงููุทููุจุฉ**:
- ุนุฑุถ ุชูุงุตูู ุงููุงุชูุฑุฉ
- ูููุฐุฌ ุชุณุฌูู ุฏูุนุฉ
- ุฌุฏูู ุณุฌู ุงูุฏูุนุงุช
- ุญุณุงุจ ุงููุจูุบ ุงููุชุจูู
- ุฃุฒุฑุงุฑ: ุทุจุงุนุฉ PDFุ ุฅุฑุณุงู ุจุงูุจุฑูุฏ
- ุณุฌู ุงููุดุงุทุงุช (Timeline)

---

### 10. ๐ง ูุธุงู ุงูููุงุชูุฑ - Cloud Functions
**ุงููุฏุฉ**: 3-4 ุณุงุนุงุช  
**ุงูุฃูููุฉ**: ๐ด๐ด ุญุฑุฌ

**ุงูููู**: ุฅูุดุงุก `functions/src/triggers/invoiceTriggers.ts`

**ุงููุธุงุฆู ุงููุทููุจุฉ**:
- `generateInvoiceNumber()`
- `onInvoiceCreated()`
- `onPaymentRecorded()`
- `checkOverdueInvoices()` (scheduled)

---

### 11. ๐ง ูุธุงู ุงูููุงุชูุฑ - ุชูููุฏ PDF
**ุงููุฏุฉ**: 1 ููู  
**ุงูุฃูููุฉ**: ๐ก๐ก ููู

**ุงูููุชุจุงุช ุงูููุชุฑุญุฉ**:
- `@react-pdf/renderer`
- ุฃู `jspdf`
- ุฃู `puppeteer` (ููู Cloud Function)

**ุงูููููุงุช**:
- ูุงูุจ ุงููุงุชูุฑุฉ (ุชุตููู ุงุญุชุฑุงูู)
- ูุนูููุงุช ุงูุดุฑูุฉ (ููุฌูุ ุนููุงูุ ุฑูู ุถุฑูุจู)
- ุฌุฏูู ุงูุจููุฏ ูุน ุงูุถุฑูุจุฉ
- QR Code
- ุดุฑูุท ูุฃุญูุงู

---

### 12. ๐ง Dispatch Dashboard
**ุงููุฏุฉ**: 1-2 ููู  
**ุงูุฃูููุฉ**: ๐ก๐ก ููู

**ุงูููู**: ุฅูุดุงุก `apps/web/src/app/dispatch/page.tsx`

**ุงูููููุงุช**:
- ุฅุญุตุงุฆูุงุช (ุทูุจุงุช ุชุญุชุงุฌ ููุงุฏุ ุฌุงูุฒุฉ ููุฅุฑุณุงูุ ููุฏ ุงูุฅุฑุณุงู)
- ูุงุฆูุฉ ุงูุทูุจุงุช ุงูุชู ุชุญุชุงุฌ ููุงุฏ
- ูุงุฌูุฉ ุชุญุฏูุซ ุญุงูุฉ ุงูููุงุฏ
- ูุงุฆูุฉ ุงูุทูุจุงุช ุงูุฌุงูุฒุฉ ููุฅุฑุณุงู
- ูููุฐุฌ ุชุณุฌูู ุงูุฅุฑุณุงู

**ูุซุงู**: ุฑุงุฌุน `apps/web/src/app/designer/page.tsx`

---

### 13. ๐ง ุชูุฑูุฑ ุงูุทูุจุงุช
**ุงููุฏุฉ**: 1-2 ููู  
**ุงูุฃูููุฉ**: ๐ด ุญุฑุฌ

**ุงูููู**: ุฅูุดุงุก `apps/web/src/app/reports/orders/page.tsx`

**ุงูููููุงุช**:
- ุชุตููุฉ: ุงููุชุฑุฉ ุงูุฒูููุฉุ ุงูุญุงูุฉุ ุงููุณูุ ุงูุฃููููุฉ
- ุฌุฏูู ุงููุชุงุฆุฌ
- ุฅุญุตุงุฆูุงุช: ุฅุฌูุงููุ ููุชููุ ููุฏ ุงูุชูููุฐุ ููุบู
- ุฑุณู ุจูุงูู (ุนุฏุฏ ุงูุทูุจุงุช ุญุณุจ ุงูุดูุฑ)
- ุชุตุฏูุฑ Excel

**ุงูููุชุจุงุช**:
- `recharts` ููุฑุณูู ุงูุจูุงููุฉ
- `xlsx` ูุชุตุฏูุฑ Excel

---

### 14. ๐ง ุชูุฑูุฑ ุงููุจูุนุงุช
**ุงููุฏุฉ**: 1 ููู  
**ุงูุฃูููุฉ**: ๐ก ููู

**ุงูููู**: ุฅูุดุงุก `apps/web/src/app/reports/sales/page.tsx`

**ุงูููููุงุช**:
- ุชุตููุฉ: ุงููุชุฑุฉ ุงูุฒูููุฉ
- ุฅุฌูุงูู ุงููุจูุนุงุช (ุฑ.ุณ)
- ุชูุฒูุน ุงููุจูุนุงุช (Digital, Offset, Indoor)
- ุฃูุถู ุงูุนููุงุก (Top 10)
- ุฑุณู ุจูุงูู: ุงููุจูุนุงุช ุงูุดูุฑูุฉ
- ุฑุณู ุจูุงูู: ุงูุชูุฒูุน ุญุณุจ ุงูููุน (Pie Chart)

---

### 15. ๐ง ุชูุฑูุฑ ุงูููุงุชูุฑ ูุงููุฏููุนุงุช
**ุงููุฏุฉ**: 1 ููู  
**ุงูุฃูููุฉ**: ๐ก ููู

**ุงูููู**: ุฅูุดุงุก `apps/web/src/app/reports/invoices/page.tsx`

**ุงูููููุงุช**:
- ุฅุญุตุงุฆูุงุช: ูุฏููุนุฉุ ูุชุฃุฎุฑุฉุ ูุณุชุญูุฉ
- ูุงุฆูุฉ ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ (Urgent)
- ุงูุชุฏููุงุช ุงูููุฏูุฉ (Cashflow)
- ุฑุณู ุจูุงูู: ุงููุฏููุนุงุช ุงูุดูุฑูุฉ
- ุชุตุฏูุฑ Excel

---

## ๐ข ุงููุณุชูู 4: ูููุฏ ูููู ูููู ุชุฃุฌููู

### 16. โธ๏ธ ูุธุงู ุงูุนููุงุก (CRM)
**ุงููุฏุฉ**: 2-3 ุฃูุงู  
**ุงูุฃููููุฉ**: ูููู ุชุฃุฌููู ูููุฑุญูุฉ 2

### 17. โธ๏ธ Sales Head Dashboard
**ุงููุฏุฉ**: 1 ููู  
**ุงูุฃููููุฉ**: ูููู ุชุฃุฌููู ูููุฑุญูุฉ 2

### 18. โธ๏ธ ูุธุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
**ุงููุฏุฉ**: 2-3 ุฃูุงู  
**ุงูุฃููููุฉ**: ูููู ุชุฃุฌููู ูููุฑุญูุฉ 2

### 19. โธ๏ธ Activity Logs
**ุงููุฏุฉ**: 1-2 ููู  
**ุงูุฃููููุฉ**: ูููู ุชุฃุฌููู ูููุฑุญูุฉ 3

### 20. โธ๏ธ ูุธุงู ุงูุฃุฑุดูุฉ
**ุงููุฏุฉ**: 1 ููู  
**ุงูุฃููููุฉ**: ูููู ุชุฃุฌููู ูููุฑุญูุฉ 3

---

## ๐ ููุฎุต ุงููุฏุฏ

| ุงููุณุชูู | ุงูููุงู | ุงููุฏุฉ ุงูุฅุฌูุงููุฉ |
|---------|---------|------------------|
| **ุงููุณุชูู 1** (ุนุงุฌู) | 1-3 | 1 ุณุงุนุฉ |
| **ุงููุณุชูู 2** (ููู ุฌุฏุงู) | 4-6 | 1-2 ููู |
| **ุงููุณุชูู 3** (ููู) | 7-15 | 2-3 ุฃุณุงุจูุน |
| **ุงููุณุชูู 4** (ูุคุฌู) | 16-20 | 1-2 ุดูุฑ |

---

## โ ุชุชุจุน ุงูุชูุฏู

### ุงูุฃุณุจูุน 1:
- [ ] 1. ุฅุตูุงุญ Security Rules
- [ ] 2. ุชุฃููู Counters
- [ ] 3. ูุดุฑ Security Rules
- [ ] 4. ุฅุถุงูุฉ materialsStatus
- [ ] 5. ุญุฏ ุฃูุตู ูููุฑู ูู ุงูุชุณุนูุฑุฉ
- [ ] 6. ูุงุฌูุฉ ุชุนููู ุงูููุงู
- [ ] 7. ุงูููุงุชูุฑ - ุงููุงุฆูุฉ
- [ ] 8. ุงูููุงุชูุฑ - ุงูุฅูุดุงุก

### ุงูุฃุณุจูุน 2:
- [ ] 9. ุงูููุงุชูุฑ - ุงูุชูุงุตูู
- [ ] 10. ุงูููุงุชูุฑ - Cloud Functions
- [ ] 11. ุงูููุงุชูุฑ - PDF
- [ ] 12. Dispatch Dashboard

### ุงูุฃุณุจูุน 3:
- [ ] 13. ุชูุฑูุฑ ุงูุทูุจุงุช
- [ ] 14. ุชูุฑูุฑ ุงููุจูุนุงุช
- [ ] 15. ุชูุฑูุฑ ุงูููุงุชูุฑ

### ูุฑุงุฌุนุฉ ูุงุฎุชุจุงุฑ:
- [ ] ุงุฎุชุจุงุฑ ุฌููุน ุงูููุฒุงุช
- [ ] ูุฑุงุฌุนุฉ ุงูุฃูุงู
- [ ] ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก
- [ ] ุงููุซุงุฆู

---

## ๐ฏ ุงููุฏู ุงูููุงุฆู

**ุจุนุฏ 3-4 ุฃุณุงุจูุน:**
- โ ูุธุงู ููุงุชูุฑ ูุงูู
- โ ุชูุงุฑูุฑ ุฃุณุงุณูุฉ ุดุงููุฉ
- โ Dispatch Dashboard
- โ ุฃูุงู ูุญุณูู
- โ ุฌุงูุฒ ููุฅุทูุงู ุงูุชุฌุฑูุจู (Beta)

---

**ููุงุญุธุฉ**: ูุฐู ุงููุงุฆูุฉ ูุงุจูุฉ ููุชุญุฏูุซ. ุฑุงุฌุนูุง ููููุงู ูุญุฏูุซ ุงูุญุงูุฉ.

**ุขุฎุฑ ุชุญุฏูุซ**: 6 ููููุจุฑ 2025  
**ุงูุญุงูุฉ**: ุฌุงูุฒ ููุชูููุฐ โ

</div>



