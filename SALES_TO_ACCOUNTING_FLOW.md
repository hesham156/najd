# ๐ ุณูุฑ ุงูุนูู: ูู ุงููุจูุนุงุช ุฅูู ุงูุญุณุงุจุงุช

## โ ุงูุฎูุงุตุฉ

ุชู ุชุญุฏูุซ ุงููุธุงู ุจูุฌุงุญ ูุฏุนู ุงูุณูุฑ ุงูุชุงูู:

```
ุงููุจูุนุงุช ูุถูู ุทูุจ โ ูุญุฏุฏ "ุทูุจ ุนุฑุถ ุณุนุฑ" โ 
ูุณู ุงูุญุณุงุจุงุช ูุฑู ุงูุทูุจ ููุนูู ุนุฑุถ ุงูุณุนุฑ
```

---

## ๐ฏ ุงูุณูุฑ ุงููุจุณุท

### 1๏ธโฃ ุงููุจูุนุงุช ูุถูู ุทูุจ

**ุงูุตูุญุฉ:** `http://localhost:3000/orders/new`

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงุณู ุงูุนููู: ุดุฑูุฉ ุงูุฃูู              โ
โ ุฑูู ุงููุงุชู: 0501234567              โ
โ ุงูููุชุฌ: ูุฑูุช ุดุฎุตูุฉ                  โ
โ ุงููููุฉ: 1000                        โ
โ                                     โ
โ โ๏ธ ุทูุจ ุนุฑุถ ุณุนุฑ (Quotation)         โ
โ                                     โ
โ [ุฅูุดุงุก ุงูุทูุจ]                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ุงููุชูุฌุฉ:**
- ููุญูุธ ุงูุทูุจ ุจู `isQuotation: true`
- ููุถุงู tag "quotation"
- ุงูุญุงูุฉ: `pending_ceo_review`

---

### 2๏ธโฃ ุงูุทูุจ ูุฐูุจ ููุณู ุงูุญุณุงุจุงุช

**ุชููุงุฆูุงู ูุจุฏูู ุฃู ุชุฏุฎู!**

ูุฃู ูู `firestore.rules`:
```javascript
(hasDepartment('accounting') && (
  resource.data.isQuotation == true  // โ ุงูุทูุจ ูุฑุฆู ููุณู ุงูุญุณุงุจุงุช
))
```

---

### 3๏ธโฃ ูุณู ุงูุญุณุงุจุงุช ููุชุญ ููุญุฉ ุงูุชุญูู

**ุงูุตูุญุฉ:** `http://localhost:3000/accounting`

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ฐ ููุญุฉ ุชุญูู ูุณู ุงูุญุณุงุจุงุช             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ ุนุฑูุถ ุงูุฃุณุนุงุฑ ุงูุฃุฎูุฑุฉ              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ๐ฐ ุนุฑุถ ุณุนุฑ - NAJD-2025-0001          โ
โ ุงูุนููู: ุดุฑูุฉ ุงูุฃูู                    โ
โ ุงูุญุงูุฉ: ุฌุฏูุฏ                          โ
โ [ุฅูุดุงุก ุนุฑุถ ุณุนุฑ] โ                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### 4๏ธโฃ ุงูุญุณุงุจุงุช ููุดุฆ ุนุฑุถ ุงูุณุนุฑ

**ุงูุตูุญุฉ:** `http://localhost:3000/accounting/quotations/new`

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุฅูุดุงุก ุนุฑุถ ุณุนุฑ ุฌุฏูุฏ                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงูุนููู: ุดุฑูุฉ ุงูุฃูู                  โ
โ ุงูุทูุจ ุงููุฑุชุจุท: NAJD-2025-0001       โ
โ                                     โ
โ ุงูุจููุฏ:                             โ
โ - ูุฑูุช ุดุฎุตูุฉ ร 1000                โ
โ   ุณุนุฑ ุงููุญุฏุฉ: 0.50 ุฑ.ุณ              โ
โ   ุงููุฌููุน: 500 ุฑ.ุณ                  โ
โ                                     โ
โ ุงููุฌููุน ุงููุฑุนู: 500 ุฑ.ุณ             โ
โ ุงูุถุฑูุจุฉ (15%): 75 ุฑ.ุณ               โ
โ ุงูุฅุฌูุงูู: 575 ุฑ.ุณ                   โ
โ                                     โ
โ ุตุงูุญ ุญุชู: 2025-12-01                โ
โ                                     โ
โ [ุญูุธ ูุฅุฑุณุงู ููููุงููุฉ]               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### 5๏ธโฃ ุฅุฑุณุงู ููุนููู ูุงูุชุธุงุฑ ุงูุฑุฏ

```
โ๏ธ ุฅุฑุณุงู ุนุฑุถ ุงูุณุนุฑ ููุนููู
    โ
โณ ุงูุนููู ูุฑุงุฌุน
    โ
โโโโโโโโโโโฌโโโโโโโโโโโ
โ โ ูุงูู  โ โ ุฑูุถ   โ
โโโโโโโโโโโดโโโโโโโโโโโ
```

---

### 6๏ธโฃ ุฅุฐุง ุงูุนููู ูุงูู

```
โ ุงูุนููู ูุงูู ุนูู ุงูุณุนุฑ
    โ
ุชุญููู ุนุฑุถ ุงูุณุนุฑ ูุทูุจ ุชูููุฐ
    โ
ุงูุทูุจ ูุฏุฎู ุงูุณูุฑ ุงูุทุจูุนู:
CEO โ ุชุตููู โ ุทุจุงุนุฉ โ ุฏูุน โ ุฅุฑุณุงู
```

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### โ 1. Firestore Rules
**ุงูููู:** `firestore.rules`

**ุงูุชุนุฏูู:**
```javascript
// ุงูุณุทุฑ 97-101: ูุฑุงุกุฉ ุงูุทูุจุงุช
(hasDepartment('accounting') && (
  resource.data.status in ['pending_payment', 'payment_confirmed'] ||
  resource.data.isQuotation == true  // โ ุฌุฏูุฏ
))

// ุงูุณุทุฑ 136-140: ุชุญุฏูุซ ุงูุทูุจุงุช
(hasDepartment('accounting') && (
  resource.data.status in ['pending_payment'] ||
  resource.data.isQuotation == true  // โ ุฌุฏูุฏ
))
```

**ุงููุชูุฌุฉ:**
โ ูุณู ุงูุญุณุงุจุงุช ููููู ุฑุคูุฉ ูุชุญุฏูุซ ุฌููุน ุงูุทูุจุงุช ุงูุชู `isQuotation: true`

---

### โ 2. ุฃููุงุน ุงูุตูุงุญูุงุช
**ุงูููู:** `packages/shared/src/types/user.types.ts`

**ุงูุฅุถุงูุงุช:**
```typescript
interface UserPermissions {
  // ... ุงูุตูุงุญูุงุช ุงูููุฌูุฏุฉ
  
  // ุตูุงุญูุงุช ุนุฑูุถ ุงูุฃุณุนุงุฑ ูุงูููุงุชูุฑ
  canCreateQuotation: boolean;
  canEditQuotation: boolean;
  canApproveQuotation: boolean;
  canCreateInvoice: boolean;
  canEditInvoice: boolean;
  canManagePayments: boolean;
}
```

**ุงููุชูุฌุฉ:**
โ ูุณู ุงูุญุณุงุจุงุช ูุฏูู ุฌููุน ุงูุตูุงุญูุงุช ุงููุทููุจุฉ

---

### โ 3. ุฃููุงุน ุนุฑูุถ ุงูุฃุณุนุงุฑ
**ุงูููู ุงูุฌุฏูุฏ:** `packages/shared/src/types/quotation.types.ts`

**ุงููุญุชูู:**
- 11 ุญุงูุฉ ูุนุฑุถ ุงูุณุนุฑ
- ุจููุฉ ุนุฑุถ ุงูุณุนุฑ ุงููุงููุฉ
- ุฏูุงู ูุณุงุนุฏุฉ

---

### โ 4. ุฃููุงุน ุงูููุงุชูุฑ
**ุงูููู ุงูุฌุฏูุฏ:** `packages/shared/src/types/invoice.types.ts`

**ุงููุญุชูู:**
- 9 ุญุงูุงุช ูููุงุชูุฑุฉ
- 4 ุฃููุงุน ููุงุชูุฑ
- ุจููุฉ ุงููุงุชูุฑุฉ ุงููุงููุฉ
- ุณุฌูุงุช ุงูุฏูุนุงุช

---

### โ 5. ุฑุจุท ุงูุทูุจุงุช ุจุนุฑูุถ ุงูุฃุณุนุงุฑ
**ุงูููู:** `packages/shared/src/types/order.types.ts`

**ุงูุฅุถุงูุงุช:**
```typescript
interface Order {
  // ... ุงูุญููู ุงูููุฌูุฏุฉ
  
  isQuotation?: boolean;
  quotationId?: string;
  quotationNumber?: string;
  quotationApprovedAt?: string;
  invoiceId?: string;
  invoiceNumber?: string;
}
```

---

### โ 6. ููุญุฉ ุชุญูู ูุณู ุงูุญุณุงุจุงุช
**ุงูููู ุงูุฌุฏูุฏ:** `apps/web/src/app/accounting/page.tsx`

**ุงููุญุชูู:**
- ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ
- ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ
- ุนุฑูุถ ุฃุณุนุงุฑ ูููุงุชูุฑ ุฃุฎูุฑุฉ
- ุฑูุงุจุท ููุชูุงุฑูุฑ

**ุงูุฑุงุจุท:** `http://localhost:3000/accounting`

---

## ๐ ุงููููุงุช ุงูุชูุซูููุฉ

### โ 1. ุฏููู ูุณู ุงูุญุณุงุจุงุช
**ุงูููู:** `ACCOUNTING_DEPARTMENT.md`

ุฏููู ุดุงูู ูุบุทู:
- ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช
- ุนุฑูุถ ุงูุฃุณุนุงุฑ ูุงูููุงุชูุฑ
- ุณูุฑ ุงูุนูู
- ุงูููุงู ุงูููููุฉ
- ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

---

### โ 2. ููุฎุต ุงูุชุญุฏูุซุงุช
**ุงูููู:** `ACCOUNTING_UPDATES.md`

ูุดูู:
- ุงูุชุบููุฑุงุช ุงูุชูููุฉ
- ุงููููุงุช ุงููุนุฏูุฉ
- ุงูุฎุทูุงุช ุงูุชุงููุฉ

---

### โ 3. ุณูุฑ ุนูู ุนุฑูุถ ุงูุฃุณุนุงุฑ
**ุงูููู:** `QUOTATION_WORKFLOW.md`

ุดุฑุญ ุชูุตููู ุฎุทูุฉ ุจุฎุทูุฉ ูู ุงููุจูุนุงุช ููุญุณุงุจุงุช

---

### โ 4. ุงูุณูุฑ ุงููุจุณุท (ูุฐุง ุงูููู)
**ุงูููู:** `SALES_TO_ACCOUNTING_FLOW.md`

ูุธุฑุฉ ุณุฑูุนุฉ ุนูู ุงูุณูุฑ ุงููุงูู

---

## โ ูุง ุชู ุฅูุฌุงุฒู

| # | ุงููููุฉ | ุงูุญุงูุฉ |
|---|--------|--------|
| 1 | ุชุญุฏูุซ ุตูุงุญูุงุช ูุณู ุงูุญุณุงุจุงุช | โ ููุชูู |
| 2 | ุฅูุดุงุก ุฃููุงุน ุนุฑูุถ ุงูุฃุณุนุงุฑ | โ ููุชูู |
| 3 | ุฅูุดุงุก ุฃููุงุน ุงูููุงุชูุฑ | โ ููุชูู |
| 4 | ุฑุจุท ุงูุทูุจุงุช ุจุนุฑูุถ ุงูุฃุณุนุงุฑ | โ ููุชูู |
| 5 | ุชุญุฏูุซ Firestore Rules | โ ููุชูู ูููุดูุฑ |
| 6 | ุฅูุดุงุก ููุญุฉ ุชุญูู ูุณู ุงูุญุณุงุจุงุช | โ ููุชูู |
| 7 | ุงูุชูุซูู ุงูุดุงูู | โ ููุชูู |

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ุงููุฑุญูุฉ ุงููุงุฏูุฉ - ุงูุชุทููุฑ:

#### 1. ุตูุญุงุช ุนุฑูุถ ุงูุฃุณุนุงุฑ
- [ ] `/accounting/quotations/new` - ุฅูุดุงุก ุนุฑุถ ุณุนุฑ
- [ ] `/accounting/quotations` - ูุงุฆูุฉ ุนุฑูุถ ุงูุฃุณุนุงุฑ
- [ ] `/accounting/quotations/[id]` - ุชูุงุตูู ูุชุนุฏูู

#### 2. ุตูุญุงุช ุงูููุงุชูุฑ
- [ ] `/accounting/invoices/new` - ุฅูุดุงุก ูุงุชูุฑุฉ
- [ ] `/accounting/invoices` - ูุงุฆูุฉ ุงูููุงุชูุฑ
- [ ] `/accounting/invoices/[id]` - ุชูุงุตูู ูุฏูุนุงุช

#### 3. ููุฒุงุช ุฅุถุงููุฉ
- [ ] ุชุตุฏูุฑ PDF ูุนุฑูุถ ุงูุฃุณุนุงุฑ
- [ ] ุชุตุฏูุฑ PDF ููููุงุชูุฑ
- [ ] ุฅุฑุณุงู ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- [ ] ููุงูุจ ุฌุงูุฒุฉ
- [ ] ุงูุชูุงุฑูุฑ ุงููุงููุฉ

#### 4. Cloud Functions
- [ ] ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ
- [ ] ุชุญููู ุนุฑุถ ุณุนุฑ ูุทูุจ
- [ ] ุชุญุฏูุซ ุญุงูุฉ ุงูููุงุชูุฑ
- [ ] ุงูุชุฐููุฑ ุจุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ

---

## ๐ ุงูุจุฏุก ุงูุณุฑูุน

### ูููุจูุนุงุช:

```bash
# 1. ุงูุชุญ ุตูุญุฉ ุฅูุดุงุก ุทูุจ
http://localhost:3000/orders/new

# 2. ุงููุฃ ุงููุนูููุงุช
# 3. โ ูุนูู "ุทูุจ ุนุฑุถ ุณุนุฑ"
# 4. ุงุถุบุท "ุฅูุดุงุก ุงูุทูุจ"
```

### ููุณู ุงูุญุณุงุจุงุช:

```bash
# 1. ุงูุชุญ ููุญุฉ ุงูุชุญูู
http://localhost:3000/accounting

# 2. ุณุชุฑู ุงูุทูุจ ูู ุงููุงุฆูุฉ
# 3. ุงูุชุญู ูุฃูุดุฆ ุนุฑุถ ุงูุณุนุฑ
```

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงู ูุฏูู ุฃู ุฃุณุฆูุฉ:

1. ุฑุงุฌุน `ACCOUNTING_DEPARTMENT.md` ููุฏููู ุงูุดุงูู
2. ุฑุงุฌุน `QUOTATION_WORKFLOW.md` ููุณูุฑ ุงูุชูุตููู
3. ุฑุงุฌุน `ACCOUNTING_UPDATES.md` ููุชูุงุตูู ุงูุชูููุฉ

---

## โจ ุงูุฎูุงุตุฉ

โ **ุงููุจูุนุงุช** ููููู ุงูุขู ุฅูุดุงุก ุทูุจ ูุชุญุฏูุฏู ูู "ุทูุจ ุนุฑุถ ุณุนุฑ"

โ **ูุณู ุงูุญุณุงุจุงุช** ูุฑู ุงูุทูุจ ุชููุงุฆูุงู ูููููู ุฅูุดุงุก ุนุฑุถ ุงูุณุนุฑ

โ **ุงูุณูุฑ ูุงูู** ูู ุงููุจูุนุงุช โ ุงูุญุณุงุจุงุช โ ุงูุนููู โ ุงูุชูููุฐ

โ **ุฌููุน ุงูุตูุงุญูุงุช** ูุญุฏุซุฉ ูุฌุงูุฒุฉ

โ **Firestore Rules** ููุดูุฑุฉ ููุดุทุฉ

โ **ุงูุชูุซูู** ุดุงูู ูููุตู

---

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!** ๐

---

ยฉ 2024 ุดุฑูุฉ ูุฌุฏ - ุฌููุน ุงูุญููู ูุญููุธุฉ


